{
  "project": {
    "name": "GymAI",
    "description": "Application Flutter de tracking d'entra√Ænement avec d√©tection automatique des r√©p√©titions via BLE et halt√®re connect√©e (ESP32 + MPU6050)",
    "version": "1.0.0+1",
    "platform": "Flutter 3.7.0",
    "language": "Dart"
  },

  "concept_core": {
    "probleme_resolu": "Tracking automatique des r√©p√©titions d'exercices de musculation sans intervention manuelle",
    "solution": "Halt√®re connect√©e via BLE qui envoie les donn√©es IMU (MPU6050) √† l'app Flutter qui utilise un mod√®le TensorFlow Lite pour classifier les mouvements et compter les reps",
    "value_proposition": [
      "D√©tection automatique des r√©p√©titions en temps r√©el",
      "Classification des exercices (curl biceps, curl marteau, etc.)",
      "Analyse du tempo d'ex√©cution",
      "Programmes d'entra√Ænement guid√©s avec quiz personnalis√©",
      "Historique et statistiques de progression",
      "Ajout manuel d'exercices avec interface intuitive en 2 √©tapes"
    ]
  },

  "architecture": {
    "pattern": "BLoC-like avec StreamControllers",
    "state_management": "StreamBuilder + setState",
    "data_persistence": "SharedPreferences (JSON)",
    "navigation": "BottomNavigationBar avec IndexedStack",
    "theming": "Custom theme avec couleurs jaune/orange (#F5C32E, #FFA500)"
  },

  "tech_stack": {
    "framework": "Flutter 3.7.0",
    "dependencies": {
      "flutter_blue_plus": "^1.16.0 - Communication BLE avec ESP32",
      "tflite_flutter": "^0.12.1 - Inf√©rence ML pour classification d'exercices",
      "shared_preferences": "^2.2.2 - Persistance locale (sessions, programmes, settings)",
      "fl_chart": "^0.69.0 - Graphiques de progression (bar charts, heatmaps)",
      "intl": "^0.19.0 - Formatage de dates"
    },
    "hardware": {
      "device": "ESP32 avec MPU6050 (IMU 6-axis)",
      "sensors": "Acc√©l√©rom√®tre + Gyroscope",
      "connection": "Bluetooth Low Energy (BLE)",
      "data_rate": "~50Hz pour donn√©es IMU"
    },
    "ml_model": {
      "type": "TensorFlow Lite",
      "location": "assets/models/",
      "input": "Donn√©es IMU (acc√©l√©rom√®tre + gyroscope)",
      "output": "Classification d'exercices + confiance + tempo"
    }
  },

  "project_structure": {
    "lib/": {
      "main.dart": "Point d'entr√©e, initialise l'app avec MaterialApp et AppShell",
      "app_shell.dart": "Shell principal avec navigation bottom bar (4 onglets: Training, Programme, Historique, Compte)",

      "models/": {
        "workout_models.dart": {
          "classes": ["WorkoutSet", "WorkoutSession"],
          "purpose": "Mod√®les de donn√©es pour s√©ries et sessions d'entra√Ænement"
        },
        "program_models.dart": {
          "classes": ["UserProfile", "ProgramExercise", "WorkoutDay", "WorkoutProgram", "ActiveProgram"],
          "purpose": "Mod√®les pour syst√®me de programmes guid√©s"
        }
      },

      "services/": {
        "ble_service.dart": {
          "role": "Service central de communication BLE",
          "responsibilities": [
            "Scan et connexion au device ESP32",
            "R√©ception des donn√©es IMU via BLE notifications",
            "Buffering des donn√©es pour le mod√®le ML",
            "Gestion du workout state (actif/inactif, pause/resume)",
            "Comptage des reps et d√©tection de sets",
            "Sauvegarde des sessions"
          ],
          "streams": [
            "workoutStateStream - √âtat du workout (actif/inactif)",
            "metricsStream - TrainingMetrics en temps r√©el",
            "currentSetsStream - Liste des sets de la session",
            "currentSetRepsStream - Reps de la s√©rie en cours",
            "sessionDurationStream - Dur√©e de la session",
            "onDetected - √âtat de connexion BLE",
            "sessionSavedStream - √âv√©nement de sauvegarde"
          ],
          "key_methods": [
            "startWorkout() - Lance une session",
            "stopWorkout() - Termine et sauvegarde la session",
            "pauseWorkout() / resumeWorkout()",
            "addManualSet() - Ajoute une s√©rie manuellement"
          ]
        },
        "rep_ai.dart": {
          "role": "Service d'inf√©rence ML pour classification",
          "responsibilities": [
            "Chargement du mod√®le TFLite",
            "Pr√©traitement des donn√©es IMU",
            "Inf√©rence pour classifier l'exercice",
            "Calcul du tempo et de la confiance"
          ],
          "output": "TrainingMetrics (exercise, reps, tempo, confidence)"
        },
        "imu_service.dart": {
          "role": "Traitement des donn√©es IMU brutes",
          "responsibilities": [
            "Parsing des bytes BLE en valeurs IMU",
            "Filtrage et normalisation des donn√©es",
            "D√©tection de mouvement (seuils)"
          ]
        },
        "workout_history_service.dart": {
          "role": "Persistance des sessions d'entra√Ænement",
          "storage": "SharedPreferences (cl√©: 'workout_history')",
          "methods": [
            "saveSession(WorkoutSession) - Sauvegarde une session",
            "getAllSessions() - R√©cup√®re toutes les sessions",
            "deleteSession(index) - Supprime une session"
          ]
        },
        "stats_service.dart": {
          "role": "Calcul des statistiques agr√©g√©es",
          "calculs": [
            "Total sessions, sets, reps, volume (kg)",
            "Exercices favoris et compteurs par exercice",
            "Personal Records (PRs) par exercice",
            "Activit√© hebdomadaire (8 derni√®res semaines)",
            "Heatmap d'activit√© (56 derniers jours)",
            "Streaks (s√©rie actuelle et record)",
            "Dur√©e moyenne des sessions"
          ],
          "output": "WorkoutStats object"
        },
        "program_service.dart": {
          "role": "Gestion des programmes d'entra√Ænement guid√©s",
          "programmes_predefinis": [
            {
              "id": "beginner_muscle",
              "name": "Prise de Masse D√©butant",
              "goal": "muscle",
              "level": "beginner",
              "days": 3,
              "structure": "Full Body A/B/C"
            },
            {
              "id": "intermediate_muscle",
              "name": "Push Pull Legs",
              "goal": "muscle",
              "level": "intermediate",
              "days": 4,
              "structure": "Push/Pull/Legs/Upper"
            },
            {
              "id": "beginner_strength",
              "name": "Force D√©butant",
              "goal": "strength",
              "level": "beginner",
              "days": 3,
              "structure": "5x5 style (Squat/Bench/Row, Deadlift/OHP/Pull, Squat light)"
            },
            {
              "id": "beginner_endurance",
              "name": "Endurance Musculaire",
              "goal": "endurance",
              "level": "beginner",
              "days": 4,
              "structure": "Circuits hautes reps"
            },
            {
              "id": "beginner_weightloss",
              "name": "Perte de Poids",
              "goal": "weight_loss",
              "level": "beginner",
              "days": 5,
              "structure": "HIIT Full Body"
            }
          ],
          "methods": [
            "recommendPrograms(UserProfile) - Filtre programmes selon profil",
            "saveActiveProgram() / loadActiveProgram() - Persistance",
            "nextSet() / nextExercise() / nextDay() - Avancement",
            "isSetCompleted(detectedReps) - Validation (80% du target)",
            "getDayProgress() / getProgramProgress() - Calcul progression"
          ]
        },
        "session_service.dart": "Service legacy (possiblement non utilis√©)"
      },

      "pages/": {
        "training_page.dart": {
          "role": "Page principale d'entra√Ænement",
          "modes": [
            {
              "mode": "Normal (libre)",
              "description": "D√©tection auto des reps sans programme",
              "ui": "Grand cercle de reps avec pulse animation, tempo chip, exercice d√©tect√©"
            },
            {
              "mode": "Guid√© (programme actif)",
              "description": "Suit un programme avec exercices pr√©d√©finis",
              "ui_inactive": "Preview du programme, exercice en cours, progression de s√©ance, liste des prochains exos",
              "ui_active": "CircularProgressIndicator avec reps/target, auto-advance quand target atteint",
              "auto_advance": "Passe √† la s√©rie/exercice suivant automatiquement quand reps d√©tect√©es >= 80% de la cible"
            }
          ],
          "features": [
            "Start/Stop/Pause workout",
            "Rest timer automatique apr√®s chaque s√©rie",
            "Ajout manuel d'exercices (2-step dialog)",
            "Preview des 3 derni√®res sessions (mode inactif)",
            "Compteur de dur√©e et s√©ries en temps r√©el",
            "√âtat connexion BLE",
            "Liste horizontale des sets compl√©t√©s"
          ],
          "manual_entry": {
            "step1": "Grille 3 colonnes avec 16 exercices (ic√¥nes emoji, couleurs par muscle)",
            "step2": "Formulaire (reps*, poids KG/LBS, √©quipement) avec gradient header"
          },
          "exercises_list": [
            "D√©velopp√© couch√© üèãÔ∏è (Pectoraux)",
            "D√©velopp√© inclin√© üí™ (Pectoraux)",
            "D√©velopp√© d√©clin√© üîª (Pectoraux)",
            "Curl biceps üí™ (Biceps)",
            "Curl marteau üî® (Biceps)",
            "Tractions ‚¨ÜÔ∏è (Dos)",
            "Rowing üö£ (Dos)",
            "Squat ü¶µ (Jambes)",
            "Presse √† cuisses ü¶ø (Jambes)",
            "Soulev√© de terre ‚ö° (Full body)",
            "Extensions triceps üí• (Triceps)",
            "Dips ‚¨áÔ∏è (Triceps)",
            "√âl√©vations lat√©rales ü¶Ö (√âpaules)",
            "D√©velopp√© militaire üéñÔ∏è (√âpaules)",
            "Crunch üî• (Abdos)",
            "Autre ‚ûï"
          ]
        },
        "program_page.dart": {
          "role": "Syst√®me de programmes guid√©s",
          "quiz": {
            "steps": [
              {
                "step": 1,
                "question": "Quel est ton objectif principal ?",
                "options": ["Prise de masse üí™", "Force üèãÔ∏è", "Endurance üèÉ", "Perte de poids üî•"]
              },
              {
                "step": 2,
                "question": "Quel est ton niveau ?",
                "options": ["D√©butant üå± (<6 mois)", "Interm√©diaire üí™ (6m-2ans)", "Avanc√© üèÜ (>2ans)"]
              },
              {
                "step": 3,
                "question": "Combien de jours peux-tu t'entra√Æner ?",
                "options": ["3 üìÖ", "4 üìÜ", "5 üóìÔ∏è", "6 üìã"]
              },
              {
                "step": 4,
                "question": "Quel √©quipement as-tu ?",
                "type": "multi-select",
                "options": ["Halt√®res üèãÔ∏è", "Barre üí™", "Machines ‚öôÔ∏è", "Poids du corps ü§∏"]
              }
            ],
            "progress_bar": "Barre de progression visuelle 4 √©tapes"
          },
          "flow": [
            "1. R√©pond au quiz (4 √©tapes)",
            "2. Voit programmes recommand√©s bas√©s sur profil",
            "3. Clique 'Commencer ce programme'",
            "4. ‚Üí Bascule auto vers Training tab",
            "5. Mode guid√© s'active avec preview du programme",
            "6. Lance la s√©ance ‚Üí Interface guid√©e"
          ],
          "program_card": {
            "header": "Gradient de couleur selon objectif + ic√¥ne",
            "stats": "Jours/semaine, nombre de s√©ances",
            "days_preview": "Liste des jours avec nombre d'exercices et sets",
            "cta": "Bouton 'Commencer ce programme'"
          }
        },
        "history_page.dart": {
          "role": "Historique et filtrage des sessions",
          "features": [
            "Search bar (recherche par nom d'exercice ou √©quipement)",
            "Filtres temporels (Tous, Semaine, Mois, 3 Mois)",
            "Filtre par exercice (dropdown dynamique)",
            "Stats filtr√©es (total reps, sets, record) avec gradient card",
            "Liste des sessions avec swipe-to-delete",
            "Pull-to-refresh",
            "Empty states intelligents"
          ],
          "session_card": {
            "elements": "Date, dur√©e, nombre de sets, total reps",
            "details_expandable": "Liste des sets avec exercice, reps, tempo, poids, √©quipement",
            "delete": "Swipe left to delete avec confirmation"
          }
        },
        "account_page.dart": {
          "role": "Profil utilisateur et statistiques",
          "sections": [
            {
              "section": "Profile Header",
              "content": "Avatar √©ditable, nom √©ditable, phrase motivante"
            },
            {
              "section": "Quick Stats",
              "content": "3 cards (Total reps, Total sets, Volume total kg)"
            },
            {
              "section": "Streak Card",
              "content": "S√©rie actuelle üî• + Record personnel"
            },
            {
              "section": "Weekly Progress",
              "content": "BarChart (fl_chart) - 8 derni√®res semaines de reps"
            },
            {
              "section": "Personal Records",
              "content": "Top 5 PRs par exercice (max reps)"
            },
            {
              "section": "Activity Heatmap",
              "content": "GitHub-style heatmap - 56 derniers jours (8 semaines)"
            },
            {
              "section": "Settings",
              "content": "Toggle KG/LBS (SharedPreferences)"
            }
          ],
          "data_source": "StatsService.calculateStats(sessions)"
        },
        "home_page.dart": "Page legacy (possiblement non utilis√©e)",
        "detection_page.dart": "Page legacy (possiblement non utilis√©e)",
        "login_page.dart": "Page legacy (possiblement non utilis√©e)",
        "onboarding_page.dart": "Page legacy (possiblement non utilis√©e)"
      },

      "theme/": {
        "app_theme.dart": {
          "colors": {
            "primary": "#F5C32E (yellow)",
            "secondary": "#FFA500 (orange)",
            "background": "#050505 (near black)",
            "card_background": "Colors.white.withOpacity(0.05)",
            "border": "Colors.white.withOpacity(0.1)"
          },
          "gradients": {
            "primary": "LinearGradient([#F5C32E, #FFA500])",
            "exercise_specific": "Couleurs par groupe musculaire"
          },
          "borders": "12-16px border radius",
          "typography": {
            "headers": "Bold, white",
            "body": "Regular, white70",
            "accents": "Yellow/Orange"
          }
        }
      },

      "widgets/": {
        "big_button.dart": "Bouton custom (possiblement legacy)",
        "pulse_loader.dart": "Animation de chargement pulsante"
      }
    },

    "assets/": {
      "models/": "Mod√®les TensorFlow Lite pour classification d'exercices"
    }
  },

  "data_flow": {
    "workout_detection_flow": [
      "1. ESP32 (MPU6050) ‚Üí donn√©es IMU brutes via BLE",
      "2. BLEService re√ßoit notifications ‚Üí parse bytes",
      "3. IMUService traite et filtre donn√©es",
      "4. Buffer de donn√©es ‚Üí RepAI (TFLite inference)",
      "5. RepAI retourne TrainingMetrics (exercise, reps, tempo, conf)",
      "6. BLEService compte reps et d√©tecte fin de set (30s timeout)",
      "7. UI update via StreamBuilder (metricsStream, currentSetsStream)",
      "8. Stop workout ‚Üí WorkoutHistoryService.saveSession()",
      "9. Session sauvegard√©e dans SharedPreferences"
    ],
    "guided_mode_flow": [
      "1. User compl√®te quiz dans ProgramPage",
      "2. ProgramService.recommendPrograms(profile) ‚Üí liste filtr√©e",
      "3. User clique 'Commencer programme'",
      "4. ActiveProgram cr√©√© et sauvegard√© (SharedPreferences)",
      "5. Navigation vers Training tab",
      "6. TrainingPage d√©tecte _activeProgram ‚Üí mode guid√©",
      "7. UI Preview: affiche exercice courant, sets/reps target, progression",
      "8. User lance workout ‚Üí UI guid√©e active",
      "9. BLE d√©tecte reps ‚Üí _completeCurrentSet() si >= 80% target",
      "10. ProgramService.nextSet() ‚Üí mise √† jour ActiveProgram",
      "11. Notification de repos + auto-advance",
      "12. R√©p√®te jusqu'√† fin du jour ‚Üí nextDay() ou programme compl√©t√©"
    ],
    "stats_calculation_flow": [
      "1. AccountPage initState ‚Üí charge sessions",
      "2. StatsService.calculateStats(sessions)",
      "3. Parcourt toutes les sessions et sets",
      "4. Agr√®ge: total reps/sets/volume, compteurs exercices, PRs",
      "5. Calcule: weekly progress (8 semaines), activity heatmap (56 jours)",
      "6. Calcule: streaks (s√©ries cons√©cutives de jours)",
      "7. Retourne WorkoutStats object",
      "8. UI affiche graphiques et cartes"
    ]
  },

  "key_features": {
    "1_detection_automatique": {
      "description": "D√©tection temps r√©el des r√©p√©titions via halt√®re BLE",
      "technologies": ["BLE", "TFLite", "IMU processing"],
      "accuracy": "Classification d'exercices avec score de confiance",
      "tempo_analysis": "Analyse du tempo d'ex√©cution (s/rep)"
    },
    "2_ajout_manuel": {
      "description": "Interface 2-step pour ajout manuel d'exercices",
      "step1": "S√©lection visuelle (grille 3x5 avec emojis et couleurs)",
      "step2": "Formulaire d√©tails (reps, poids KG/LBS, √©quipement)",
      "ux": "Priorit√© √† la rapidit√© et l'intuitivit√©"
    },
    "3_programmes_guides": {
      "description": "Syst√®me complet de programmes avec quiz et guidage",
      "quiz": "4 √©tapes pour profil utilisateur",
      "recommendations": "Filtrage intelligent selon objectif/niveau/disponibilit√©",
      "guided_workout": "Interface d√©di√©e avec progression temps r√©el",
      "auto_advance": "Passage automatique entre sets/exercices",
      "persistence": "Sauvegarde progression dans SharedPreferences"
    },
    "4_historique_stats": {
      "description": "Tracking complet avec filtres et visualisations",
      "filtering": ["Recherche texte", "Filtres temporels", "Filtre par exercice"],
      "charts": ["BarChart progression hebdomadaire", "Heatmap activit√© GitHub-style"],
      "metrics": ["Total volume", "PRs par exercice", "Streaks", "Exercice favori"]
    },
    "5_ui_coherente": {
      "description": "Design √©pur√© et coh√©rent sur toute l'app",
      "color_scheme": "Jaune/Orange sur fond noir",
      "components": "Cards avec bordures, gradients, emojis",
      "animations": "Pulse sur reps, transitions fluides",
      "responsive": "Adaptation mobile optimis√©e"
    }
  },

  "user_flows": {
    "premier_lancement": [
      "1. Ouvre l'app ‚Üí AppShell avec 4 tabs",
      "2. Tab Training par d√©faut ‚Üí bouton 'COMMENCER'",
      "3. Peut explorer History (vide), Account (stats 0), Programme (quiz)"
    ],
    "workout_libre": [
      "1. Training tab ‚Üí 'COMMENCER'",
      "2. Workout d√©marre ‚Üí timer, connexion BLE",
      "3. D√©tection auto OU ajout manuel",
      "4. Reps s'affichent en temps r√©el",
      "5. Sets s'ajoutent √† la liste",
      "6. 'STOP' ‚Üí Session sauvegard√©e ‚Üí Snackbar confirmation",
      "7. History et Account mis √† jour"
    ],
    "workout_guide": [
      "1. Programme tab ‚Üí Quiz 4 √©tapes",
      "2. Voit programmes recommand√©s",
      "3. 'Commencer ce programme'",
      "4. ‚Üí Bascule Training tab (mode guid√©)",
      "5. Voit preview exercice + progression s√©ance",
      "6. 'D√âMARRER LA S√âANCE'",
      "7. Interface guid√©e: exercice courant, sets/reps target, progress circle",
      "8. D√©tection auto ‚Üí auto-advance quand target atteint",
      "9. Notifications de repos entre sets",
      "10. Continue jusqu'√† fin de tous les exercices",
      "11. Session sauvegard√©e normalement"
    ],
    "consultation_stats": [
      "1. Account tab",
      "2. Voit quick stats (reps/sets/volume)",
      "3. Scroll ‚Üí streak, progression hebdo (chart)",
      "4. PRs, activity heatmap",
      "5. Toggle KG/LBS dans settings"
    ],
    "recherche_historique": [
      "1. History tab",
      "2. Search bar ‚Üí tape nom exercice",
      "3. Applique filtres temporels et exercice",
      "4. Voit stats filtr√©es",
      "5. Expand session ‚Üí d√©tails sets",
      "6. Swipe left ‚Üí delete session"
    ]
  },

  "state_management": {
    "pattern": "Reactive Streams (BLoC-like sans package)",
    "implementation": {
      "BLEService": {
        "streams": "StreamControllers pour workout state, metrics, sets, duration",
        "listeners": "UI subscribe via StreamBuilder",
        "updates": "sink.add() pour propager changements"
      },
      "Pages": {
        "local_state": "setState() pour UI state simple",
        "global_state": "Streams from BLEService",
        "persistence": "SharedPreferences pour donn√©es long-terme"
      }
    },
    "data_persistence": {
      "workout_history": "List<WorkoutSession> en JSON dans SharedPreferences",
      "active_program": "ActiveProgram en JSON dans SharedPreferences",
      "user_settings": "Nom, KG/LBS preference dans SharedPreferences",
      "key_structure": {
        "workout_history": "Liste compl√®te des sessions",
        "active_program": "Programme en cours si existant",
        "user_name": "Nom personnalis√©",
        "use_kg": "bool pour unit√© de poids"
      }
    }
  },

  "ble_protocol": {
    "device": "ESP32 avec MPU6050",
    "connection": "BLE (flutter_blue_plus)",
    "service_uuid": "√Ä d√©finir dans code",
    "characteristic_uuid": "√Ä d√©finir dans code",
    "data_format": "Bytes repr√©sentant valeurs IMU (accX, accY, accZ, gyrX, gyrY, gyrZ)",
    "sampling_rate": "~50Hz recommand√©",
    "notifications": "Activ√©es pour stream continu de donn√©es"
  },

  "ml_model": {
    "framework": "TensorFlow Lite",
    "input": {
      "type": "S√©quence de donn√©es IMU",
      "shape": "√Ä d√©finir selon mod√®le (ex: [1, 100, 6] pour 100 samples de 6 features)",
      "features": ["accX", "accY", "accZ", "gyrX", "gyrY", "gyrZ"]
    },
    "output": {
      "exercise_class": "Index de classe d'exercice",
      "confidence": "Score 0-1",
      "tempo": "Temps moyen par rep calcul√©"
    },
    "classes": ["curl_biceps", "curl_marteau", "bench_press", "etc..."],
    "preprocessing": "Normalisation, windowing dans RepAI"
  },

  "code_organization": {
    "separation_of_concerns": {
      "Models": "Structures de donn√©es pures (WorkoutSet, WorkoutSession, Program...)",
      "Services": "Logique m√©tier (BLE, ML, Stats, Persistence)",
      "Pages": "UI et interaction utilisateur",
      "Widgets": "Composants r√©utilisables",
      "Theme": "Constantes de style"
    },
    "dependencies": {
      "Pages ‚Üí Services": "Pages utilisent services pour logique",
      "Services ‚Üí Models": "Services manipulent models",
      "Services ind√©pendants": "Chaque service a responsabilit√© unique"
    }
  },

  "design_patterns": {
    "singleton": "BLEService (instance unique)",
    "stream": "Reactive programming avec StreamController",
    "factory": "fromJson() constructors pour models",
    "builder": "StreamBuilder, FutureBuilder pour UI reactive",
    "repository": "HistoryService, ProgramService pour data access"
  },

  "ui_components": {
    "navigation": {
      "type": "BottomNavigationBar",
      "tabs": [
        {"index": 0, "label": "Training", "icon": "fitness_center"},
        {"index": 1, "label": "Programme", "icon": "assignment"},
        {"index": 2, "label": "Historique", "icon": "history"},
        {"index": 3, "label": "Compte", "icon": "person"}
      ]
    },
    "common_patterns": {
      "cards": "Container avec borderRadius 12-16, border white10, background white05",
      "gradients": "LinearGradient pour headers et accents",
      "stats_cards": "3 colonnes avec ic√¥ne, valeur, label",
      "empty_states": "Emoji + message + CTA",
      "lists": "ListView.builder avec cards",
      "dialogs": "Custom avec gradient header"
    },
    "animations": {
      "pulse": "AnimationController sur reps circle",
      "transitions": "AnimatedContainer pour √©tat changes",
      "progress": "LinearProgressIndicator, CircularProgressIndicator"
    }
  },

  "performance_considerations": {
    "ble_data_rate": "Buffering pour √©viter trop de ML inferences",
    "ml_inference": "Throttling pour limiter CPU usage",
    "ui_updates": "StreamBuilder rebuild optimis√©",
    "list_rendering": "ListView.builder pour grandes listes",
    "persistence": "Async I/O pour SharedPreferences"
  },

  "error_handling": {
    "ble_errors": "Try-catch sur connexion, fallback UI states",
    "ml_errors": "Graceful degradation si mod√®le fail",
    "persistence_errors": "Default values si load fail",
    "user_feedback": "SnackBar pour succ√®s/erreurs"
  },

  "testing_strategy": {
    "manual_testing": "Test sur device physique pour BLE",
    "simulator": "Possible pour UI sans BLE",
    "test_data": "Mock sessions pour dev/test stats"
  },

  "future_enhancements": {
    "potential_features": [
      "Cloud sync (Firebase)",
      "Social features (partage PRs)",
      "Plus de programmes (interm√©diaire/avanc√© pour autres goals)",
      "Graphiques de progression par exercice",
      "Recommandations de repos/r√©cup√©ration",
      "Int√©gration nutrition",
      "Export CSV/PDF des stats",
      "Notifications rappel workout",
      "Apple Watch / Wear OS support",
      "Vid√©os tutoriels exercices",
      "Coaching IA personnalis√©"
    ],
    "technical_debt": [
      "Refactor legacy pages (home, detection, login, onboarding)",
      "Tests unitaires pour services",
      "Tests d'int√©gration BLE",
      "Documentation API",
      "Optimisation mod√®le ML",
      "Gestion erreurs plus robuste"
    ]
  },

  "deployment": {
    "platforms": ["Android", "iOS"],
    "requirements": {
      "android": "BLE permissions, minSdkVersion pour BLE",
      "ios": "BLE permissions dans Info.plist",
      "assets": "Mod√®le TFLite inclus dans assets/models/"
    },
    "build_commands": {
      "android": "flutter build apk --release",
      "ios": "flutter build ios --release"
    }
  },

  "developer_notes": {
    "setup": [
      "1. flutter pub get",
      "2. Connecter device BLE (ESP32)",
      "3. flutter run",
      "4. Autoriser permissions BLE"
    ],
    "debugging": {
      "ble_issues": "V√©rifier device allum√©, distance, permissions",
      "ml_issues": "V√©rifier mod√®le dans assets/, TFLite delegate",
      "ui_issues": "Hot reload, v√©rifier streams"
    },
    "code_style": "Flutter/Dart conventions, lints activ√©s"
  },

  "important_context": {
    "user_language": "Fran√ßais (toute l'UI est en fran√ßais)",
    "target_users": "Pratiquants de musculation de tous niveaux",
    "unique_selling_points": [
      "Halt√®re connect√©e unique",
      "ML pour classification automatique",
      "Programmes guid√©s personnalis√©s",
      "UI/UX √©pur√©e et intuitive",
      "Gratuit, offline-first"
    ],
    "hardware_dependency": "App n√©cessite halt√®re BLE pour d√©tection auto (mais peut fonctionner en mode manuel uniquement)"
  },

  "git_workflow": {
    "current_branch": "claude/ble-dumbbell-auto-connect-01Uk4DKwKSJdXH8gbMwiV4RP",
    "recent_commits": [
      "feat: Ajout syst√®me de programmes guid√©s avec quiz et tracking",
      "feat: Interface en 2 √©tapes pour ajout manuel d'exercices",
      "feat: Refonte UI compl√®te de l'app avec design √©pur√©"
    ],
    "commit_convention": "Conventional Commits (feat:, fix:, refactor:, etc.)"
  },

  "summary": {
    "what_is_this": "GymAI est une app Flutter de tracking d'entra√Ænement musculation qui combine une halt√®re connect√©e BLE (ESP32+MPU6050) avec un mod√®le ML (TFLite) pour d√©tecter automatiquement les r√©p√©titions et classifier les exercices. Elle offre aussi des programmes guid√©s personnalis√©s via quiz, un historique filtrable, et des stats visuelles de progression.",

    "core_value": "Transformer l'exp√©rience d'entra√Ænement en rendant le tracking automatique, pr√©cis et motivant gr√¢ce √† l'IoT et l'IA.",

    "current_state": "App fonctionnelle avec 4 onglets majeurs (Training, Programme, Historique, Compte), d√©tection BLE+ML, programmes guid√©s avec 5 programmes pr√©d√©finis, stats avanc√©es avec graphiques, et UI compl√®tement revue avec design √©pur√© jaune/orange sur fond noir.",

    "next_steps_suggested": [
      "Tester end-to-end avec hardware BLE r√©el",
      "Optimiser mod√®le ML pour meilleure accuracy",
      "Ajouter plus de programmes (interm√©diaire/avanc√©)",
      "Impl√©menter cloud sync",
      "Nettoyer legacy code (pages non utilis√©es)"
    ]
  },

  "meta": {
    "generated_date": "2025-12-15",
    "purpose": "Contexte complet du projet pour handoff √† une autre IA ou d√©veloppeur",
    "completeness": "Couvre architecture, code, features, data flow, UI/UX, d√©ploiement",
    "usage": "Donner ce JSON + acc√®s au code pour full context understanding"
  }
}
